#!/usr/bin/env sh

set -e

# 1) Run lint-staged (includes ESLint, Stylelint, and Prettier per package.json)
npx lint-staged

# 2) Run i18n validation only if i18n files changed
if git diff --cached --name-only | grep -q "^src/i18n/"; then
  echo "🌐 Detected i18n changes, running validation..."
  npm run i18n:validate || exit 1
fi

# 3) Warn-only guard for hardcoded control sizes (disabled - script not found)
# npm run -s guard:hardcoded-controls || true

echo "✅ Pre-commit checks passed!"