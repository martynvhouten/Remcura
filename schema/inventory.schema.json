{
  "tables": {
    "counting_entries": {
      "columns": {
        "id": { "type": "uuid", "nullable": false, "default": "gen_random_uuid()" },
        "counting_session_id": { "type": "uuid", "nullable": false },
        "practice_id": { "type": "uuid", "nullable": false },
        "location_id": { "type": "uuid", "nullable": false },
        "product_id": { "type": "uuid", "nullable": false },
        "system_quantity": { "type": "numeric", "nullable": false },
        "counted_quantity": { "type": "numeric", "nullable": false },
        "variance_quantity": { "type": "numeric", "nullable": true },
        "batch_number": { "type": "character varying", "nullable": true },
        "expiry_date": { "type": "date", "nullable": true },
        "notes": { "type": "text", "nullable": true },
        "confidence_level": { "type": "character varying", "nullable": true, "default": "'high'::character varying" },
        "counted_by": { "type": "uuid", "nullable": true },
        "counted_at": { "type": "timestamp with time zone", "nullable": true, "default": "now()" },
        "verified_by": { "type": "uuid", "nullable": true },
        "verified_at": { "type": "timestamp with time zone", "nullable": true },
        "created_at": { "type": "timestamp with time zone", "nullable": true, "default": "now()" },
        "updated_at": { "type": "timestamp with time zone", "nullable": true, "default": "now()" }
      }
    },
    "counting_sessions": {
      "columns": {
        "id": { "type": "uuid", "nullable": false, "default": "gen_random_uuid()" },
        "practice_id": { "type": "uuid", "nullable": false },
        "location_id": { "type": "uuid", "nullable": false },
        "name": { "type": "character varying", "nullable": false },
        "description": { "type": "text", "nullable": true },
        "status": {
          "type": "counting_session_status",
          "nullable": true,
          "default": "'draft'::counting_session_status"
        },
        "count_all_products": { "type": "boolean", "nullable": true, "default": "true" },
        "product_category_filter": { "type": "character varying", "nullable": true },
        "specific_product_ids": { "type": "ARRAY", "nullable": true },
        "started_at": { "type": "timestamp with time zone", "nullable": true },
        "completed_at": { "type": "timestamp with time zone", "nullable": true },
        "approved_at": { "type": "timestamp with time zone", "nullable": true },
        "total_products_counted": { "type": "integer", "nullable": true, "default": "0" },
        "products_with_variance": { "type": "integer", "nullable": true, "default": "0" },
        "total_variance_value": { "type": "numeric", "nullable": true, "default": "0" },
        "created_by": { "type": "uuid", "nullable": true },
        "started_by": { "type": "uuid", "nullable": true },
        "completed_by": { "type": "uuid", "nullable": true },
        "approved_by": { "type": "uuid", "nullable": true },
        "created_at": { "type": "timestamp with time zone", "nullable": true, "default": "now()" },
        "updated_at": { "type": "timestamp with time zone", "nullable": true, "default": "now()" }
      }
    },
    "order_list_items": {
      "columns": {
        "id": { "type": "uuid", "nullable": false, "default": "gen_random_uuid()" },
        "order_list_id": { "type": "uuid", "nullable": false },
        "product_id": { "type": "uuid", "nullable": false },
        "supplier_product_id": { "type": "uuid", "nullable": true },
        "suggested_quantity": { "type": "numeric", "nullable": false },
        "ordered_quantity": { "type": "numeric", "nullable": true },
        "received_quantity": { "type": "numeric", "nullable": true, "default": "0" },
        "unit_price": { "type": "numeric", "nullable": true },
        "total_price": { "type": "numeric", "nullable": true },
        "status": { "type": "character varying", "nullable": true, "default": "'pending'::character varying" },
        "notes": { "type": "text", "nullable": true },
        "created_at": { "type": "timestamp with time zone", "nullable": true, "default": "now()" },
        "minimum_stock": { "type": "numeric", "nullable": true, "default": "0" },
        "maximum_stock": { "type": "numeric", "nullable": true, "default": "100" },
        "current_stock": { "type": "numeric", "nullable": true, "default": "0" },
        "reorder_point": { "type": "numeric", "nullable": true },
        "preferred_supplier_id": { "type": "uuid", "nullable": true },
        "alternative_suppliers": { "type": "ARRAY", "nullable": true, "default": "'{}'::uuid[]" },
        "last_order_date": { "type": "timestamp with time zone", "nullable": true },
        "last_order_quantity": { "type": "numeric", "nullable": true },
        "average_consumption": { "type": "numeric", "nullable": true, "default": "0" },
        "lead_time_days": { "type": "integer", "nullable": true, "default": "7" },
        "urgency_level": { "type": "character varying", "nullable": true, "default": "'normal'::character varying" },
        "auto_suggest_enabled": { "type": "boolean", "nullable": true, "default": "true" },
        "manual_override": { "type": "boolean", "nullable": true, "default": "false" },
        "override_reason": { "type": "text", "nullable": true }
      }
    },
    "order_lists": {
      "columns": {
        "id": { "type": "uuid", "nullable": false, "default": "gen_random_uuid()" },
        "practice_id": { "type": "uuid", "nullable": false },
        "location_id": { "type": "uuid", "nullable": false },
        "supplier_id": { "type": "uuid", "nullable": true },
        "name": { "type": "character varying", "nullable": false },
        "description": { "type": "text", "nullable": true },
        "status": { "type": "order_list_status", "nullable": true, "default": "'draft'::order_list_status" },
        "total_items": { "type": "integer", "nullable": true, "default": "0" },
        "total_value": { "type": "numeric", "nullable": true, "default": "0" },
        "created_by": { "type": "uuid", "nullable": true },
        "created_at": { "type": "timestamp with time zone", "nullable": true, "default": "now()" },
        "updated_at": { "type": "timestamp with time zone", "nullable": true, "default": "now()" },
        "list_type": { "type": "character varying", "nullable": true, "default": "'reorder_list'::character varying" },
        "auto_reorder_enabled": { "type": "boolean", "nullable": true, "default": "false" },
        "reorder_frequency_days": { "type": "integer", "nullable": true, "default": "14" },
        "last_auto_check": { "type": "timestamp with time zone", "nullable": true },
        "min_order_value": { "type": "numeric", "nullable": true, "default": "0" },
        "preferred_order_day": { "type": "integer", "nullable": true },
        "order_cutoff_time": { "type": "time without time zone", "nullable": true },
        "tags": { "type": "ARRAY", "nullable": true, "default": "'{}'::text[]" },
        "is_template": { "type": "boolean", "nullable": true, "default": "false" },
        "template_name": { "type": "character varying", "nullable": true }
      }
    },
    "practice_locations": {
      "columns": {
        "id": { "type": "uuid", "nullable": false, "default": "gen_random_uuid()" },
        "practice_id": { "type": "uuid", "nullable": false },
        "name": { "type": "character varying", "nullable": false },
        "code": { "type": "character varying", "nullable": false },
        "description": { "type": "text", "nullable": true },
        "location_type": { "type": "character varying", "nullable": true, "default": "'storage'::character varying" },
        "address": { "type": "text", "nullable": true },
        "floor_level": { "type": "character varying", "nullable": true },
        "room_number": { "type": "character varying", "nullable": true },
        "is_active": { "type": "boolean", "nullable": true, "default": "true" },
        "is_main_location": { "type": "boolean", "nullable": true, "default": "false" },
        "requires_counting": { "type": "boolean", "nullable": true, "default": "true" },
        "allows_negative_stock": { "type": "boolean", "nullable": true, "default": "false" },
        "restricted_access": { "type": "boolean", "nullable": true, "default": "false" },
        "access_code": { "type": "character varying", "nullable": true },
        "responsible_user_id": { "type": "uuid", "nullable": true },
        "created_at": { "type": "timestamp with time zone", "nullable": true, "default": "now()" },
        "updated_at": { "type": "timestamp with time zone", "nullable": true, "default": "now()" },
        "created_by": { "type": "uuid", "nullable": true },
        "updated_by": { "type": "uuid", "nullable": true }
      }
    },
    "practice_members": {
      "columns": {
        "id": { "type": "uuid", "nullable": false, "default": "uuid_generate_v4()" },
        "practice_id": { "type": "uuid", "nullable": false },
        "user_id": { "type": "uuid", "nullable": false },
        "role": { "type": "user_role", "nullable": false, "default": "'guest'::user_role" },
        "joined_at": { "type": "timestamp with time zone", "nullable": true, "default": "now()" },
        "invited_by": { "type": "uuid", "nullable": true },
        "created_at": { "type": "timestamp with time zone", "nullable": true, "default": "now()" },
        "updated_at": { "type": "timestamp with time zone", "nullable": true, "default": "now()" }
      }
    },
    "product_batches": {
      "columns": {
        "id": { "type": "uuid", "nullable": false, "default": "gen_random_uuid()" },
        "practice_id": { "type": "uuid", "nullable": false },
        "product_id": { "type": "uuid", "nullable": false },
        "location_id": { "type": "uuid", "nullable": false },
        "batch_number": { "type": "character varying", "nullable": false },
        "supplier_batch_number": { "type": "character varying", "nullable": true },
        "expiry_date": { "type": "date", "nullable": false },
        "received_date": { "type": "date", "nullable": false, "default": "CURRENT_DATE" },
        "initial_quantity": { "type": "numeric", "nullable": false },
        "current_quantity": { "type": "numeric", "nullable": false },
        "reserved_quantity": { "type": "numeric", "nullable": true, "default": "0" },
        "available_quantity": { "type": "numeric", "nullable": true },
        "unit_cost": { "type": "numeric", "nullable": true },
        "total_cost": { "type": "numeric", "nullable": true },
        "currency": { "type": "character varying", "nullable": true, "default": "'EUR'::character varying" },
        "supplier_id": { "type": "uuid", "nullable": true },
        "purchase_order_number": { "type": "character varying", "nullable": true },
        "invoice_number": { "type": "character varying", "nullable": true },
        "status": { "type": "character varying", "nullable": true, "default": "'active'::character varying" },
        "quality_check_passed": { "type": "boolean", "nullable": true, "default": "true" },
        "quality_notes": { "type": "text", "nullable": true },
        "quarantine_until": { "type": "date", "nullable": true },
        "created_at": { "type": "timestamp with time zone", "nullable": true, "default": "now()" },
        "updated_at": { "type": "timestamp with time zone", "nullable": true, "default": "now()" },
        "created_by": { "type": "uuid", "nullable": true }
      }
    },
    "products": {
      "columns": {
        "id": { "type": "uuid", "nullable": false, "default": "uuid_generate_v4()" },
        "magento_id": { "type": "integer", "nullable": true },
        "sku": { "type": "character varying", "nullable": false },
        "name": { "type": "character varying", "nullable": false },
        "category": { "type": "character varying", "nullable": true },
        "subcategory": { "type": "character varying", "nullable": true },
        "brand": { "type": "character varying", "nullable": true },
        "description": { "type": "text", "nullable": true },
        "image_url": { "type": "text", "nullable": true },
        "price": { "type": "numeric", "nullable": true },
        "unit": { "type": "character varying", "nullable": true },
        "active": { "type": "boolean", "nullable": true, "default": "true" },
        "last_synced_at": { "type": "timestamp with time zone", "nullable": true, "default": "now()" },
        "created_at": { "type": "timestamp with time zone", "nullable": true, "default": "now()" },
        "updated_at": { "type": "timestamp with time zone", "nullable": true, "default": "now()" },
        "preferred_supplier_id": { "type": "uuid", "nullable": true },
        "requires_batch_tracking": { "type": "boolean", "nullable": false, "default": "false" },
        "barcode": { "type": "character varying", "nullable": true },
        "gtin": { "type": "character varying", "nullable": true },
        "gpc_brick_code": { "type": "character varying", "nullable": true },
        "gln_manufacturer": { "type": "character varying", "nullable": true },
        "net_content_value": { "type": "numeric", "nullable": true },
        "net_content_uom": { "type": "character varying", "nullable": true },
        "gross_weight": { "type": "numeric", "nullable": true },
        "net_weight": { "type": "numeric", "nullable": true },
        "base_unit_indicator": { "type": "boolean", "nullable": true, "default": "true" },
        "orderable_unit_indicator": { "type": "boolean", "nullable": true, "default": "true" },
        "despatch_unit_indicator": { "type": "boolean", "nullable": true, "default": "true" },
        "country_of_origin": { "type": "character varying", "nullable": true },
        "effective_from_date": { "type": "date", "nullable": true },
        "effective_to_date": { "type": "date", "nullable": true },
        "product_lifecycle_status": { "type": "character varying", "nullable": true }
      }
    },
    "stock_levels": {
      "columns": {
        "id": { "type": "uuid", "nullable": false, "default": "gen_random_uuid()" },
        "practice_id": { "type": "uuid", "nullable": false },
        "location_id": { "type": "uuid", "nullable": false },
        "product_id": { "type": "uuid", "nullable": false },
        "current_quantity": { "type": "numeric", "nullable": true, "default": "0" },
        "reserved_quantity": { "type": "numeric", "nullable": true, "default": "0" },
        "available_quantity": { "type": "numeric", "nullable": true },
        "minimum_quantity": { "type": "numeric", "nullable": true, "default": "0" },
        "maximum_quantity": { "type": "numeric", "nullable": true },
        "reorder_point": { "type": "numeric", "nullable": true },
        "preferred_supplier_id": { "type": "uuid", "nullable": true },
        "last_counted_at": { "type": "timestamp with time zone", "nullable": true },
        "last_movement_at": { "type": "timestamp with time zone", "nullable": true },
        "last_ordered_at": { "type": "timestamp with time zone", "nullable": true },
        "created_at": { "type": "timestamp with time zone", "nullable": true, "default": "now()" },
        "updated_at": { "type": "timestamp with time zone", "nullable": true, "default": "now()" }
      }
    },
    "stock_movements": {
      "columns": {
        "id": { "type": "uuid", "nullable": false, "default": "gen_random_uuid()" },
        "practice_id": { "type": "uuid", "nullable": false },
        "location_id": { "type": "uuid", "nullable": false },
        "product_id": { "type": "uuid", "nullable": false },
        "movement_type": { "type": "character varying", "nullable": false },
        "quantity_change": { "type": "numeric", "nullable": false },
        "quantity_before": { "type": "numeric", "nullable": false },
        "quantity_after": { "type": "numeric", "nullable": false },
        "reference_type": { "type": "character varying", "nullable": true },
        "reference_id": { "type": "uuid", "nullable": true },
        "reason": { "type": "character varying", "nullable": true },
        "notes": { "type": "text", "nullable": true },
        "batch_number": { "type": "character varying", "nullable": true },
        "expiry_date": { "type": "date", "nullable": true },
        "created_by": { "type": "uuid", "nullable": true },
        "created_at": { "type": "timestamp with time zone", "nullable": true, "default": "now()" },
        "batch_id": { "type": "uuid", "nullable": true }
      }
    },
    "supplier_products": {
      "columns": {
        "id": { "type": "uuid", "nullable": false, "default": "gen_random_uuid()" },
        "supplier_id": { "type": "uuid", "nullable": false },
        "product_id": { "type": "uuid", "nullable": false },
        "supplier_sku": { "type": "character varying", "nullable": false },
        "supplier_name": { "type": "character varying", "nullable": true },
        "cost_price": { "type": "numeric", "nullable": true },
        "list_price": { "type": "numeric", "nullable": true },
        "currency": { "type": "character varying", "nullable": true, "default": "'EUR'::character varying" },
        "minimum_order_quantity": { "type": "integer", "nullable": true, "default": "1" },
        "order_multiple": { "type": "integer", "nullable": true, "default": "1" },
        "lead_time_days": { "type": "integer", "nullable": true },
        "is_available": { "type": "boolean", "nullable": true, "default": "true" },
        "is_preferred": { "type": "boolean", "nullable": true, "default": "false" },
        "created_at": { "type": "timestamp with time zone", "nullable": true, "default": "now()" },
        "updated_at": { "type": "timestamp with time zone", "nullable": true, "default": "now()" },
        "gtin": { "type": "character varying", "nullable": true },
        "last_synced_at": { "type": "timestamp with time zone", "nullable": true }
      }
    },
    "suppliers": {
      "columns": {
        "id": { "type": "uuid", "nullable": false, "default": "gen_random_uuid()" },
        "name": { "type": "character varying", "nullable": false },
        "code": { "type": "character varying", "nullable": false },
        "contact_email": { "type": "character varying", "nullable": true },
        "contact_phone": { "type": "character varying", "nullable": true },
        "contact_person": { "type": "character varying", "nullable": true },
        "address": { "type": "text", "nullable": true },
        "city": { "type": "character varying", "nullable": true },
        "postal_code": { "type": "character varying", "nullable": true },
        "country": { "type": "character varying", "nullable": true, "default": "'Netherlands'::character varying" },
        "website": { "type": "character varying", "nullable": true },
        "vat_number": { "type": "character varying", "nullable": true },
        "business_registration": { "type": "character varying", "nullable": true },
        "payment_terms": { "type": "integer", "nullable": true, "default": "30" },
        "minimum_order_amount": { "type": "numeric", "nullable": true, "default": "0" },
        "shipping_cost": { "type": "numeric", "nullable": true, "default": "0" },
        "free_shipping_threshold": { "type": "numeric", "nullable": true },
        "api_endpoint": { "type": "character varying", "nullable": true },
        "api_key_encrypted": { "type": "text", "nullable": true },
        "api_type": { "type": "character varying", "nullable": true },
        "sync_enabled": { "type": "boolean", "nullable": true, "default": "false" },
        "last_sync_at": { "type": "timestamp with time zone", "nullable": true },
        "notes": { "type": "text", "nullable": true },
        "is_active": { "type": "boolean", "nullable": true, "default": "true" },
        "preferred_order_day": { "type": "integer", "nullable": true },
        "order_cutoff_time": { "type": "time without time zone", "nullable": true },
        "created_at": { "type": "timestamp with time zone", "nullable": true, "default": "now()" },
        "updated_at": { "type": "timestamp with time zone", "nullable": true, "default": "now()" },
        "created_by": { "type": "uuid", "nullable": true },
        "updated_by": { "type": "uuid", "nullable": true },
        "integration_type": { "type": "character varying", "nullable": true, "default": "'manual'::character varying" },
        "order_method": { "type": "character varying", "nullable": true, "default": "'manual'::character varying" },
        "integration_config": { "type": "jsonb", "nullable": true, "default": "'{}'::jsonb" },
        "auto_sync_enabled": { "type": "boolean", "nullable": true, "default": "false" }
      }
    }
  },
  "enums": {
    "counting_session_status": ["approved", "cancelled", "completed", "draft", "in_progress"],
    "order_list_status": ["active", "cancelled", "completed", "draft", "submitted"],
    "user_role": ["assistant", "guest", "logistics", "manager", "member", "owner", "platform_owner"]
  }
}
